
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Category: Android - creativepsyco's Blog</title>
  <meta name="author" content="Mohit Kanwal">

  
  <meta name="description" content="Category: android">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.mohitkanwal.comblog/categories/android">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="creativepsyco's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-36037120-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

  <body>
    <a href="/" class="home-icon">
      <img src="/images/home.png"/>
    </a>

    <div class="all-posts">
  <div class="container">
    <div class="row">
      <div class="list-title col-md-offset-2 col-md-8">
        <h4>Posts in android</h4>
      </div>
    </div>
  </div>

  <div class="article-list">
    <div class="container">
      
        
        <div class="row">
          <div class="col-md-offset-2 col-md-8">
            <article>
  <h2><a href="/blog/2014/02/02/webview-vulnerability-in-facebook-android-sdk-embedded-oauth/">WebView Vulnerability in Facebook Android SDK: Embedded OAuth</a></h2>
  
  <p>
    <p><em>Reposting this from my [FB feed][4]</em></p>

<h2>TL;DR</h2>

<p>Don&rsquo;t put your FB username and password within mobile apps when you don&rsquo;t have the native FB app installed!</p>

<p>Today I learnt that the Facebook SDK for Android is very insecure. At first I thought Man in the Middle attacks on the SDK OAuth authentication process is not possible, but if you are embedding someone else&rsquo;s WebView within your own App via the SDK, you can very well control them, either via Reflection, or just by modifying the SDK code coz FB makes the SDK a public download which you then compile to link in your app. If the SDK does not find the FB app installed on a user&rsquo;s phone, it resorts to using the fallback mechanism of using an embedded WebView for authentication.</p>

  </p>
  <span class="meta">
    written 








  



<time datetime="2014-02-02T04:24:00+08:00" pubdate data-updated="true">Feb 2<span>nd</span>, 2014</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/android/'>android</a>, <a class='category' href='/blog/categories/hacks/'>hacks</a>
  
</span>


  </span>

  
    <a class="full-article-link pull-right" rel="full-article" href="/blog/2014/02/02/webview-vulnerability-in-facebook-android-sdk-embedded-oauth/">Read on &rarr;</a>
  
</article>

          </div>
        </div>
      
        
        <div class="row">
          <div class="col-md-offset-2 col-md-8">
            <article>
  <h2><a href="/blog/2014/02/02/rooting-samsung-galaxy-s3-gt-i9305-with-cyanogenmod-jelly-bean-4-dot-2-2/">Rooting Samsung Galaxy S3 GT-I9305 With CyanogenMod Jelly Bean 4.2.2</a></h2>
  
  <p>
    <p>After getting the 4.3 update my Samsung Galaxy S3 started having [weird battery problems][1], it was a high I moved to a custom ROM since they were a lot stable than a few years back and offered a much better stock Android experience without any bloated software than device OEMs put inside.</p>

<p>In this post, I shall roughly tell you how I installed a custom on my Samsung Phone.</p>

<blockquote><p>Warning: Rooting voids the warranty of your device. We and the developers of these files are not responsible if anything happens to your device. Use this rooting guide at your own risk!</p></blockquote>

  </p>
  <span class="meta">
    written 








  



<time datetime="2014-02-02T03:36:00+08:00" pubdate data-updated="true">Feb 2<span>nd</span>, 2014</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/android/'>android</a>, <a class='category' href='/blog/categories/hacks/'>hacks</a>
  
</span>


  </span>

  
    <a class="full-article-link pull-right" rel="full-article" href="/blog/2014/02/02/rooting-samsung-galaxy-s3-gt-i9305-with-cyanogenmod-jelly-bean-4-dot-2-2/">Read on &rarr;</a>
  
</article>

          </div>
        </div>
      
        
        <div class="row">
          <div class="col-md-offset-2 col-md-8">
            <article>
  <h2><a href="/blog/2014/01/05/android-activity-problem-with-posting-runnables/">Android Activity: Problem With Posting Runnables</a></h2>
  
  <p>
    <p>A lot of times in Android you end up writing code like this:</p>

<p>```java
//&mdash;&mdash; Normal Code above &mdash;&ndash;
Runnable runnable  = new Runnable() {</p>

<pre><code>@Override
public void run() {
    // Do something stupid
}
</code></pre>

<p>}
// Singleton Handler Manager &mdash; not an instance one, am I smart?
HandlerManager.getInstance().postDelayed(runnable, 20000); // Run this after 20 seconds! Delay processing of data
finish();
```</p>

<p>That is, cooking up a lot of <code>Runnables</code> and posting them on the Handler to be run after a period of time. It happens.</p>

<p>As our role as developers trying to get a feature done in time, sometimes these Runnnables are the only hope. However, this <code>Runnable</code> introduces a potential memory leak.</p>

  </p>
  <span class="meta">
    written 








  



<time datetime="2014-01-05T23:44:00+08:00" pubdate data-updated="true">Jan 5<span>th</span>, 2014</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/android/'>android</a>, <a class='category' href='/blog/categories/memory-leak/'>memory-leak</a>
  
</span>


  </span>

  
    <a class="full-article-link pull-right" rel="full-article" href="/blog/2014/01/05/android-activity-problem-with-posting-runnables/">Read on &rarr;</a>
  
</article>

          </div>
        </div>
      
        
        <div class="row">
          <div class="col-md-offset-2 col-md-8">
            <article>
  <h2><a href="/blog/2013/11/04/hide-keyboard-for-multiple-edit-boxes-in-a-page/">Hide Keyboard for Multiple Edit Boxes in a Page</a></h2>
  
  <p>
    <h1>How to hide Keyboard in the case of multiple Edit Text</h1>

<p>One common problem faced by people working on Android input field forms is that many a times there is a need to show/hide the keyboard when the person touches on some other part of the screen, other than the edit box itself. However, since the focus is retained by the edit box, even if the keyboard is hidden, its hard to actually detect when and where should you be hiding the keyboard.</p>

<h1>The Solution</h1>

<p>One way to accomplish this to use the <code>dispatchTouchEvent</code> on the parent container. This is the first event that is called whenever there is a touch encountered on the surface. Only after this the rest of the touch listeners are invoked.</p>

<p>We can first dispatch the touch and then check the <code>getCurrentFocus</code> view to see if the focus is retained by the <code>EditText</code>. If it is, then we simply hide the soft keyboard from the screen.</p>

<p>Another thing to make sure is that the parent container view groups are labelled as <code>focusableInTouchMode</code>, <code>clickable</code> and <code>focusable</code></p>

<p>Here is the gist that does this job from a custom view group that contains multiple <code>EditText</code> instances.</p>

<p><div><script src='https://gist.github.com/creativepsyco/7229277.js'></script>
<noscript><pre><code>// Very useful to capture the focus if there is a need to
    // Currently this hides the keyboard from the view
    // If the underlying view is not an EditText
    // For this to work all the parent layouts
    // must declare themselves as focusableinTouchMode
    // Focusable and clickable
    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {
        View v = getActivity().getCurrentFocus();
        boolean ret = super.dispatchTouchEvent(ev);

        View w = getActivity().getCurrentFocus();
        if (!(w instanceof EditText)) {
            // Edit Text losing focus
            // Hide the keyboard here or anything else that you wanna do.

        }
        return ret;
    }
</code></pre></noscript></div>
</p>

  </p>
  <span class="meta">
    written 








  



<time datetime="2013-11-04T11:54:00+08:00" pubdate data-updated="true">Nov 4<span>th</span>, 2013</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/android/'>android</a>
  
</span>


  </span>

  
</article>

          </div>
        </div>
      
        
        <div class="row">
          <div class="col-md-offset-2 col-md-8">
            <article>
  <h2><a href="/blog/2013/09/27/phonelib-bug-regarding-cant-find-proto/">PhoneLib Bug Regarding Cant Find Proto</a></h2>
  
  <p>
    <p>Do you make use of <a href="https://code.google.com/p/libphonenumber/">PhoneNumberUtils</a> in your android project?</p>

<p>If so, have you ever encountered this exception before?</p>

<p><code>java
java.lang.RuntimeException: cannot load/parse metadata: /com/google/i18n/phonenumbers/data/PhoneNumberMetadataProto_MY at com.google.a.a.d.a(PhoneNumberUtil.java:619)
</code></p>

<p>If yes, chances are you are probably using [proguard][progaurd] to do the obfuscation of code. However, as <a href="https://code.google.com/p/libphonenumber/issues/detail?id=259&amp;can=1&amp;q=metadata">this</a> points out, proguard automatically also obfuscates the library files. However, the PhoneNumberUtils has a hardcoded path to the proto files. Therefore, one cannot rely on obfuscating the library&rsquo;s code.</p>

<p>To resolve you must add the following lines in your <code>proguard</code> configuration file:</p>

<p><code>
-keep class com.google.i18n.phonenumbers.** { *; }
</code></p>

<p>This problem occurs in Android version Honeycomb and below it, as versions after Honeycomb have their own phonenumber util included which has a namespace of <code>com.google.android.i18n.phonenumbers</code>. If you are supporting version below honeycomb this can be an overlooked disaster.</p>

  </p>
  <span class="meta">
    written 








  



<time datetime="2013-09-27T10:30:00+08:00" pubdate data-updated="true">Sep 27<span>th</span>, 2013</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/android/'>android</a>, <a class='category' href='/blog/categories/proto/'>proto</a>
  
</span>


  </span>

  
</article>

          </div>
        </div>
      
        
        <div class="row">
          <div class="col-md-offset-2 col-md-8">
            <article>
  <h2><a href="/blog/2013/07/04/finding-a-perfect-dev-environment/">Finding a Perfect Dev Environment</a></h2>
  
  <p>
    <p>Setting up a unobstrusive development environment has its advantages. If you are one of those people who probably spend about 14 hours a day sitting in front of a monitor doing what-not, from testing to deployment and development, then read on. Otherwise you can spend some time reading an <a href="http://www.ibm.com/developerworks/rational/library/define-scope-development-environment/">IBM</a> justification of how and why a solid dev environment pays off. This post is about setting up a solid development environment on Ubuntu Linux 12.04 and contains bits and pieces of information of how a lot of things can be automated.</p>

<p>I assume some familiarity with Linux command-line for the below.</p>

<h3>Prepare your home directory</h3>

<p>This would be where all your patches come in handy. Spice it with some names that you can remember in the long-run. Keep a separate directory for SDKs, sources and the common shared libraries that you use.</p>

<p><code>bash
mkdir /home/creativepsyco
cd /home
chown msk creativepsyco
chgrp msk creativepsyco
cd /home/creativepsyco
mkdir android
</code></p>

<h3>Install ZSH and Oh-My-ZSH</h3>

<p><a href="http://www.zsh.org/">ZSH</a> is a fanstastic tool and better than your average joe-bash-shell. It has advanced modules for autocompletion and lots of plugins which, after you use, trust me, are going to be your goto tools for specific tasks.</p>

<p>You can install zsh by using these commands</p>

<p><code>bash
sudo apt-get update &amp;&amp; sudo apt-get install zsh
</code></p>

<p>Also, install <a href="https://github.com/robbyrussell/oh-my-zsh">oh-my-zsh</a> which is another cake layer on top of zsh. It includes tons of automatic zsh scripts and plugins to aid you in development.</p>

<p><code>bash
curl -L https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh | sh
</code></p>

<p>Set ZSH as your default shell</p>

<p><code>bash
chsh -s /bin/zsh
</code></p>

<blockquote><p>A tip: To get more out of your oh-my-zsh installation you need to enable some or a lot of the plugins in your <code>~/.zshrc</code> file which replaces your <code>~/.bashrc</code> file</p></blockquote>

<h3>Install Git</h3>

<p><code>bash
sudo apt-get install git-core
</code></p>

<h3>Make yourself feel at home with solarized</h3>

<p>I absolutely love the <a href="http://ethanschoonover.com/solarized">Solarized dark theme</a>. I use it everywhere: At work, in my MacBook Pro (running from 2010 without a scratch so far [touch wood]). Here&rsquo;s how it looks like:</p>

<p><img src="http://d.pr/i/xmRI.jpg" alt="Solarized Dark Image" /></p>

<p>Isn&rsquo;t it absolutely delicious. Unfortunately some of the ways to install on ubuntu terminal or gnome-terminal have been rather futile. Here&rsquo;s one that works so far:</p>

<ol>
<li>Go to your home directory</li>
<li>Blindly follow the commands below
<code>bash
$ git clone git://github.com/sigurdga/gnome-terminal-colors-solarized.git
$ cd gnome-terminal-colors-solarized
$ ./solarize
</code></li>
<li>And Voila experiment between the two themes</li>
</ol>


<h3>Start installing Android Libraries</h3>

<p>Now that the eyes are set, start installing the necessary SDKs from Android. You can get the SDK from Android&rsquo;s site. Just need to unzip it and place it in the home folder. Eventually your folder configuration should look something like this:
<code>bash
msk@ubuntu:/home/creativepsyco/android$ ls
adt-bundle-linux            ----- ADT bundle
idea-IC                     ----- IDE IntelliJ stack (Or Eclipse)
shared_android_lib          ----- Shared library
project_android             ----- Project Git directory
anotherapp_android          ----- Project Git directory
</code></p>

<blockquote><p>A Tip: If you are using a 64-bit OS then to make your life easy, you should install these compatible libs to help you: <code>sudo apt-get install ia32-libs</code></p></blockquote>

<h3>SQLite</h3>

<p><code>bash
sudo apt-get install sqlite3
</code></p>

<h3>Ending Note</h3>

<p>Now you have everything for Android development and please follow <a href="http://developer.android.com/training/index.html">Google&rsquo;s tutorials</a>.</p>

  </p>
  <span class="meta">
    written 








  



<time datetime="2013-07-04T13:51:00+08:00" pubdate data-updated="true">Jul 4<span>th</span>, 2013</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/android/'>android</a>, <a class='category' href='/blog/categories/development/'>development</a>, <a class='category' href='/blog/categories/ubuntu/'>ubuntu</a>
  
</span>


  </span>

  
</article>

          </div>
        </div>
      
        
        <div class="row">
          <div class="col-md-offset-2 col-md-8">
            <article>
  <h2><a href="/blog/2013/06/24/android-shortcuts-and-must-have-gists/">Android Shortcuts and Must-have Gists</a></h2>
  
  <p>
    <h3>Making use of shared preferences for storing information</h3>

<p>```java</p>

<pre><code>public boolean getStoredLoginState() {
    prefs = getSharedPreferences(PREF_NAME, MODE_PRIVATE);
    boolean state = prefs.getBoolean(B_LOGGED_IN_STATE, false);
    return state;
}

public void setLoggedInState(boolean isLoggedIn) {
    prefs = getSharedPreferences(PREF_NAME, MODE_PRIVATE);
    SharedPreferences.Editor editor = prefs.edit();

    editor.putBoolean(B_LOGGED_IN_STATE, isLoggedIn);
    editor.commit();
}
</code></pre>

<p>```</p>

<h3>Making use of the redirection trick</h3>

<p>Let&rsquo;s say you want to make sure the user is logged in before giving him access to a particular activity view. What you can do is to check the status of the login token through a shared preference and send back an intent with the intent that the current view was invoked with via an extra Intent parameter</p>

<p>This is the code for the invoker:</p>

<p>```java
  public void onCreate(Bundle savedInstanceState) {</p>

<pre><code>    super.onCreate(savedInstanceState);
    setContentView(R.layout.detail_view);

    if (getStoredLoginState() == true) {
        Intent intent = this.getIntent();
        Log.i(TAG, "DetailView onCreate recd position of item: " + intent.getIntExtra(ITEM_ID, 10));

        int pos = intent.getIntExtra(ITEM_ID, 10);

        // Set the text
        TextView textView = (TextView) findViewById(R.id.textView1);

        textView.setText(" " + pos);
    } else {
        // not logged in

        Intent intent = this.getIntent();
        Intent newIntent = new Intent(this, LoginActivity.class);
        newIntent.putExtra(REDIRECT_INTENT, intent);
</code></pre>

<p>//            newIntent.setAction(Intent.ACTION_MAIN);</p>

<pre><code>        newIntent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);

        startActivity(newIntent);
    }
}
</code></pre>

<p>```</p>

<p>And this is the login view code. Note that in the invoker&rsquo;s code we use the <code>Intent.FLAG_ACTIVITY_NO_HISTORY</code> to make sure that the call does not stay in the stack since login is something we need to ensure out of navigation:</p>

<p>```java
@Override</p>

<pre><code>public void onCreate(Bundle savedInstanceState) {
    Log.i(TAG, "LoginActivity onCreate() hit");
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Log.i(TAG, "Login State: " + getStoredLoginState());

    // Check for a redirect
    Intent intent = getIntent();
    redirect_intent = intent.getParcelableExtra(REDIRECT_INTENT);

    if (redirect_intent != null) {
        Log.i(TAG, "LoginActivity : this is a redirect intent " + redirect_intent);
    }
}

public void onBtnSubmitClicked(View view) {
    TextView username = (TextView) findViewById(R.id.editText);
    TextView password = (TextView) findViewById(R.id.editText1);

    if (isValidLogin(username.getText().toString(), password.getText().toString())) {
        isLoggedIn = true;
        Log.i(TAG, "LoginActivity onBtnSubmitClicked() Username Password match");
    } else {
        isLoggedIn = false;
        new AlertDialog.Builder(this)
                .setTitle("Wrong username/password")
                .setMessage("You have entered wrong username/password")
                .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        // continue with delete
                    }
                })
                .show();
    }

    setLoggedInState();

    if (isLoggedIn) {
        Log.i(TAG, "LoginActivity onBtnSubmitClicked starting List View Activity");
        if (redirect_intent != null) {
            // this will make the activity pop up back from the Task stack
            redirect_intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(redirect_intent);
        } else {
            Intent intent = new Intent(this, ListActivity.class);
            startActivity(intent);
        }
    }
}
</code></pre>

<p>```</p>

<p>More information available at the <a href="http://developer.android.com/guide/components/tasks-and-back-stack.html">Android Documentation</a></p>

<p>Cheers</p>

  </p>
  <span class="meta">
    written 








  



<time datetime="2013-06-24T17:27:00+08:00" pubdate data-updated="true">Jun 24<span>th</span>, 2013</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/android/'>android</a>, <a class='category' href='/blog/categories/gists/'>gists</a>
  
</span>


  </span>

  
</article>

          </div>
        </div>
      
    </div>
  </div>
</div>

    <footer id="footer" class="her-row">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
  <a href="/"><h4>Home</h4></a>
</div>

<div class="col-md-2">
  <div class="social-icon-list">
    
    <a href="https://twitter.com/mohitkanwal"><img src="/images/glyphicons_social_31_twitter.png"/></a>
    

    
    <a href="https://github.com/creativepsyco"><img src="/images/glyphicons_social_21_github.png"/></a>
    

    
    <a href="https://linkedin.com/in/mskanwal"><img src="/images/glyphicons_social_17_linked_in.png"/></a>
    

    
    <a href="mailto:mohit.kanwal+blog@gmail.com"><img src="/images/glyphicons_social_39_e-mail.png"/></a>
    
  </div>
</div>

<div class="pull-right">
  <h4>Powered by <a href="http://octopress.org/">Octopress</a>. Designed by <a href="http://AdrianArtiles.com">Adrian Artiles</a>.</h4>
</div>


    </div>
  </div>
</footer>

    
  </body>
</html>
