
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>creativepsyco's Blog</title>
  <meta name="author" content="Mohit Kanwal">

  
  <meta name="description" content="Making use of shared preferences for storing information 1
2
3
4
5
6
7
8
9
10
11
12
13 public boolean getStoredLoginState() { prefs = &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://creativepsyco.github.io/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="creativepsyco's Blog" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-36037120-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <div id="logo">
  	<div id="logoLeft">{</div>
  	<div id="logoText">mob</div>
  	<div id="logoRight">}</div>
  	<div class="clear"></div>
  </div>
  <h1><a href="/">creativepsyco's Blog</a></h1>
  
    <h2>Trolling you digitally</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:creativepsyco.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2013/06/24/android-shortcuts-and-must-have-gists/">Android Shortcuts and Must-have Gists</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-06-24T17:27:00+08:00" pubdate data-updated="true">Jun 24<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/06/24/android-shortcuts-and-must-have-gists/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Making use of shared preferences for storing information</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">getStoredLoginState</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">prefs</span> <span class="o">=</span> <span class="n">getSharedPreferences</span><span class="o">(</span><span class="n">PREF_NAME</span><span class="o">,</span> <span class="n">MODE_PRIVATE</span><span class="o">);</span>
</span><span class='line'>        <span class="kt">boolean</span> <span class="n">state</span> <span class="o">=</span> <span class="n">prefs</span><span class="o">.</span><span class="na">getBoolean</span><span class="o">(</span><span class="n">B_LOGGED_IN_STATE</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">state</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setLoggedInState</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">isLoggedIn</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">prefs</span> <span class="o">=</span> <span class="n">getSharedPreferences</span><span class="o">(</span><span class="n">PREF_NAME</span><span class="o">,</span> <span class="n">MODE_PRIVATE</span><span class="o">);</span>
</span><span class='line'>        <span class="n">SharedPreferences</span><span class="o">.</span><span class="na">Editor</span> <span class="n">editor</span> <span class="o">=</span> <span class="n">prefs</span><span class="o">.</span><span class="na">edit</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">editor</span><span class="o">.</span><span class="na">putBoolean</span><span class="o">(</span><span class="n">B_LOGGED_IN_STATE</span><span class="o">,</span> <span class="n">isLoggedIn</span><span class="o">);</span>
</span><span class='line'>        <span class="n">editor</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Making use of the redirection trick</h3>

<p>Let&#8217;s say you want to make sure the user is logged in before giving him access to a particular activity view. What you can do is to check the status of the login token through a shared preference and send back an intent with the intent that the current view was invoked with via an extra Intent parameter</p>

<p>This is the code for the invoker:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
</span><span class='line'>        <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">detail_view</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">getStoredLoginState</span><span class="o">()</span> <span class="o">==</span> <span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">getIntent</span><span class="o">();</span>
</span><span class='line'>            <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">&quot;DetailView onCreate recd position of item: &quot;</span> <span class="o">+</span> <span class="n">intent</span><span class="o">.</span><span class="na">getIntExtra</span><span class="o">(</span><span class="n">ITEM_ID</span><span class="o">,</span> <span class="mi">10</span><span class="o">));</span>
</span><span class='line'>
</span><span class='line'>            <span class="kt">int</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getIntExtra</span><span class="o">(</span><span class="n">ITEM_ID</span><span class="o">,</span> <span class="mi">10</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>            <span class="c1">// Set the text</span>
</span><span class='line'>            <span class="n">TextView</span> <span class="n">textView</span> <span class="o">=</span> <span class="o">(</span><span class="n">TextView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">textView1</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>            <span class="n">textView</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="n">pos</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class='line'>            <span class="c1">// not logged in</span>
</span><span class='line'>
</span><span class='line'>            <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">getIntent</span><span class="o">();</span>
</span><span class='line'>            <span class="n">Intent</span> <span class="n">newIntent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">LoginActivity</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span><span class='line'>            <span class="n">newIntent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="n">REDIRECT_INTENT</span><span class="o">,</span> <span class="n">intent</span><span class="o">);</span>
</span><span class='line'><span class="c1">//            newIntent.setAction(Intent.ACTION_MAIN);</span>
</span><span class='line'>            <span class="n">newIntent</span><span class="o">.</span><span class="na">setFlags</span><span class="o">(</span><span class="n">Intent</span><span class="o">.</span><span class="na">FLAG_ACTIVITY_NO_HISTORY</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>            <span class="n">startActivity</span><span class="o">(</span><span class="n">newIntent</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>And this is the login view code. Note that in the invoker&#8217;s code we use the <code>Intent.FLAG_ACTIVITY_NO_HISTORY</code> to make sure that the call does not stay in the stack since login is something we need to ensure out of navigation:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@Override</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">&quot;LoginActivity onCreate() hit&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
</span><span class='line'>        <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">main</span><span class="o">);</span>
</span><span class='line'>        <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">&quot;Login State: &quot;</span> <span class="o">+</span> <span class="n">getStoredLoginState</span><span class="o">());</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// Check for a redirect</span>
</span><span class='line'>        <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="n">getIntent</span><span class="o">();</span>
</span><span class='line'>        <span class="n">redirect_intent</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getParcelableExtra</span><span class="o">(</span><span class="n">REDIRECT_INTENT</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">redirect_intent</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">&quot;LoginActivity : this is a redirect intent &quot;</span> <span class="o">+</span> <span class="n">redirect_intent</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onBtnSubmitClicked</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">TextView</span> <span class="n">username</span> <span class="o">=</span> <span class="o">(</span><span class="n">TextView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">editText</span><span class="o">);</span>
</span><span class='line'>        <span class="n">TextView</span> <span class="n">password</span> <span class="o">=</span> <span class="o">(</span><span class="n">TextView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">editText1</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">isValidLogin</span><span class="o">(</span><span class="n">username</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">(),</span> <span class="n">password</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">()))</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">isLoggedIn</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span><span class='line'>            <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">&quot;LoginActivity onBtnSubmitClicked() Username Password match&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">isLoggedIn</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</span><span class='line'>            <span class="k">new</span> <span class="n">AlertDialog</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span><span class="k">this</span><span class="o">)</span>
</span><span class='line'>                    <span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="s">&quot;Wrong username/password&quot;</span><span class="o">)</span>
</span><span class='line'>                    <span class="o">.</span><span class="na">setMessage</span><span class="o">(</span><span class="s">&quot;You have entered wrong username/password&quot;</span><span class="o">)</span>
</span><span class='line'>                    <span class="o">.</span><span class="na">setPositiveButton</span><span class="o">(</span><span class="s">&quot;Ok&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">DialogInterface</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>                        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">DialogInterface</span> <span class="n">dialog</span><span class="o">,</span> <span class="kt">int</span> <span class="n">which</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>                            <span class="c1">// continue with delete</span>
</span><span class='line'>                        <span class="o">}</span>
</span><span class='line'>                    <span class="o">})</span>
</span><span class='line'>                    <span class="o">.</span><span class="na">show</span><span class="o">();</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">setLoggedInState</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">isLoggedIn</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">&quot;LoginActivity onBtnSubmitClicked starting List View Activity&quot;</span><span class="o">);</span>
</span><span class='line'>            <span class="k">if</span> <span class="o">(</span><span class="n">redirect_intent</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>                <span class="c1">// this will make the activity pop up back from the Task stack</span>
</span><span class='line'>                <span class="n">redirect_intent</span><span class="o">.</span><span class="na">addFlags</span><span class="o">(</span><span class="n">Intent</span><span class="o">.</span><span class="na">FLAG_ACTIVITY_CLEAR_TOP</span><span class="o">);</span>
</span><span class='line'>                <span class="n">startActivity</span><span class="o">(</span><span class="n">redirect_intent</span><span class="o">);</span>
</span><span class='line'>            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class='line'>                <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">ListActivity</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span><span class='line'>                <span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>More information available at the <a href="http://developer.android.com/guide/components/tasks-and-back-stack.html">Android Documentation</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2013/05/21/my-final-year-project-a-web-app-hosting-for-apps/">My Final Year Project - a Web App Hosting for Apps</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-05-21T21:53:00+08:00" pubdate data-updated="true">May 21<span>st</span>, 2013</time>
        
         | <a href="/blog/2013/05/21/my-final-year-project-a-web-app-hosting-for-apps/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>For my final year project in the School of Computing NUS I had to do something very exciting related to working with web apps. If you are familiar with online continuous integration environments like <a href="http://travis-ci.org">Travis</a> and <a href="http://jenkins-ci.org">Jenkins</a> then cracking this issue is a hen&#8217;s egg. The thing that I was required to do was compile and run research programs within a webapp. That is, feed input to a program written in C, C++ etc. and get the output, display it to the user. All of this included a data repository which housed patient data.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/05/21/my-final-year-project-a-web-app-hosting-for-apps/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2013/05/21/making-sense-of-vacations-geek-style/">Making Sense of Vacations - Geek Style</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-05-21T21:44:00+08:00" pubdate data-updated="true">May 21<span>st</span>, 2013</time>
        
         | <a href="/blog/2013/05/21/making-sense-of-vacations-geek-style/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>tl;dr</strong></p>

<p>Summer time and any geek knows that sitting at home means doing something to increase your productivity levels is a good thing. So here is something that I plan/have done.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/05/21/making-sense-of-vacations-geek-style/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2013/04/23/android-development-within-a-virtual-machine/">Android Development Within a Virtual Machine</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-04-23T17:30:00+08:00" pubdate data-updated="true">Apr 23<span>rd</span>, 2013</time>
        
         | <a href="/blog/2013/04/23/android-development-within-a-virtual-machine/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Sometimes it can be <a href="http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;cmd=displayKC&amp;externalId=1027964">really fustrating</a> to work within a Virtual Machine (VM) which might not have support for a number of removable devices. I am talking of VMWare workstation which is a big part of the problem.</p>

<p>Below I describe a working way to install a reliable working environment in VMWare Workstation 9.x running Ubuntu 12.10</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/04/23/android-development-within-a-virtual-machine/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2013/04/10/deploying-rails-on-nginx-and-thin/">Deploying Rails on Nginx and Thin</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-04-10T15:17:00+08:00" pubdate data-updated="true">Apr 10<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/04/10/deploying-rails-on-nginx-and-thin/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I have been busy lately doing my Final Year Project which comprises of building a web based service for processing analysis jobs on patient data.</p>

<p>I have developed the web service API using <a href="http://rubyonrails.org/">Rails</a> with MySQL being the backend database.</p>

<p>For deployment purposes I had no idea which of the web servers to run as such I naturally googled online and found people talking about <a href="https://github.com/capistrano/capistrano">Capistrano</a>, a great way to have deployment scripts being run on the server.</p>

<p>I needed something simple, I had seen the advantages of using SVN and <a href="http://nginx.com/">Nginx</a> as a means to deploy by SSH-ing to the server. This keeps things simple and lends us as much control as we need. So I explored.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/04/10/deploying-rails-on-nginx-and-thin/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2013/02/09/singleton-in-python/">Singleton in Python</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-02-09T19:27:00+08:00" pubdate data-updated="true">Feb 9<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/02/09/singleton-in-python/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In my current Final Year Project (FYP) for my undergraduate degree I needed to spawn processes and be able to store their state in the memory so that they can be started/re-started or stopped. I had previously gone about doing the same kind of operation in Java with a Singleton <code>ProcessManager</code> Class so I was pretty sure that such a pattern would exist in Python as well. Turns out, it is a <a href="http://lucumr.pocoo.org/2009/7/24/singletons-and-their-problems-in-python/">bad practice</a> to do so.</p>

<p>Anyways, I could not figure out a better way to do this, so I stuck with Singletons. Moreover it got me the job done.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/02/09/singleton-in-python/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2013/02/02/django-dynamic-forms/">Django Dynamic Forms</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-02-02T20:33:00+08:00" pubdate data-updated="true">Feb 2<span>nd</span>, 2013</time>
        
         | <a href="/blog/2013/02/02/django-dynamic-forms/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Here is an example of how to do a dynamic form in Django. I am loving this framework, it&#8217;s so simple</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">ServiceStartForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">):</span>
</span><span class='line'>    <span class="n">serviceList</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Service</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span><span class='line'>    <span class="k">print</span> <span class="n">serviceList</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</span><span class='line'>    <span class="n">b</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">aService</span> <span class="ow">in</span> <span class="n">serviceList</span><span class="p">:</span>
</span><span class='line'>        <span class="n">b</span><span class="p">[</span><span class="n">aService</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">aService</span><span class="o">.</span><span class="n">name</span>
</span><span class='line'>    <span class="n">c</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;Within the form, &quot;</span><span class="p">,</span> <span class="n">serviceList</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</span><span class='line'>    <span class="n">serviceChoice</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">ChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">Select</span><span class="p">())</span>
</span><span class='line'>    <span class="n">input_directory</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</span><span class='line'>    <span class="n">output_directory</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span class='line'>        <span class="nb">super</span><span class="p">(</span><span class="n">ServiceStartForm</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span class='line'>        <span class="n">serviceList</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Service</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span><span class='line'>        <span class="n">b</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">aService</span> <span class="ow">in</span> <span class="n">serviceList</span><span class="p">:</span>
</span><span class='line'>            <span class="n">b</span><span class="p">[</span><span class="n">aService</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">aService</span><span class="o">.</span><span class="n">name</span>
</span><span class='line'>        <span class="n">c</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">&quot;serviceChoice&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">choices</span> <span class="o">=</span> <span class="n">c</span>
</span></code></pre></td></tr></table></div></figure>


<p>Enjoy :)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2013/01/27/django-and-travis/">Django and Travis</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-01-27T03:42:00+08:00" pubdate data-updated="true">Jan 27<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/01/27/django-and-travis/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A sample <code>.travis</code> file to allow you to run and test on the <a href="http://travis-ci.org">Travis CI</a>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">language</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">python</span>
</span><span class='line'><span class="l-Scalar-Plain">python</span><span class="p-Indicator">:</span>
</span><span class='line'>  <span class="c1"># - &quot;2.6&quot;</span>
</span><span class='line'>  <span class="p-Indicator">-</span> <span class="s">&quot;2.7&quot;</span>
</span><span class='line'><span class="l-Scalar-Plain">services</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mysql</span>
</span><span class='line'><span class="l-Scalar-Plain">env</span><span class="p-Indicator">:</span>
</span><span class='line'>  <span class="c1"># - DJANGO=1.2.7</span>
</span><span class='line'>  <span class="c1"># - DJANGO=1.3.1</span>
</span><span class='line'>  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">DJANGO=1.4.3 DJANGO_SETTINGS_MODULE=&quot;mysite.travis_settings&quot;</span>
</span><span class='line'><span class="l-Scalar-Plain">install</span><span class="p-Indicator">:</span>
</span><span class='line'>  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">pip install -q Django==$DJANGO --use-mirrors</span>
</span><span class='line'>  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">pip install pep8 --use-mirrors</span>
</span><span class='line'>  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">pip install mysql-python --use-mirrors</span>
</span><span class='line'>  <span class="c1"># - pip install https://github.com/dcramer/pyflakes/tarball/master</span>
</span><span class='line'>  <span class="c1"># - pip install -q -e . --use-mirrors</span>
</span><span class='line'><span class="l-Scalar-Plain">before_script</span><span class="p-Indicator">:</span>
</span><span class='line'><span class="c1">#   - &quot;pep8 --exclude=migrations --ignore=E501,E225 src&quot;</span>
</span><span class='line'><span class="c1">#   - pyflakes -x W src</span>
</span><span class='line'>  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">mysql -e &#39;create database mysite_db;&#39;</span>
</span><span class='line'>  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">python manage.py syncdb --noinput</span>
</span><span class='line'><span class="l-Scalar-Plain">script</span><span class="p-Indicator">:</span>
</span><span class='line'>  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">python manage.py test</span>
</span></code></pre></td></tr></table></div></figure>


<p>Enjoy :)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2013/01/24/django-fun/">Django Fun</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-01-24T22:29:00+08:00" pubdate data-updated="true">Jan 24<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/01/24/django-fun/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Here&#8217;s how to install python on your web server :)</p>

<h3>Log in using SSH access</h3>

<p>This process may change from different kind of hosts to different machines so find out first.</p>

<h3>Install Python 2.7.2</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mkdir ~/python
</span><span class='line'>cd ~/python
</span><span class='line'>wget http://www.python.org/ftp/python/2.7.2/Python-2.7.2.tgz
</span><span class='line'>tar zxfv Python-2.7.2.tgz
</span><span class='line'>rm -rf Python-2.7.2.tgz
</span><span class='line'>find ~/python -type d | xargs chmod 0755
</span><span class='line'>cd Python-2.7.2
</span><span class='line'>./configure --prefix=$HOME/python
</span><span class='line'>make
</span><span class='line'>make install
</span><span class='line'>cd ..
</span><span class='line'>rm -rf Python-2.7.2</span></code></pre></td></tr></table></div></figure>


<h3>Modify ~/.bashrc</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>vim ~/.bashrc # Press i and enter the following:
</span><span class='line'>export PATH=$HOME/python/bin:$PATH # press &lt;escape&gt;:wq&lt;enter&gt;
</span><span class='line'>source ~/.bashrc # Whenever you want to work using Python 2.7 in the
</span><span class='line'>                 # console you will need to enter this</span></code></pre></td></tr></table></div></figure>


<p>Test your Python install</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>python -V # This should output "Python 2.7.2"</span></code></pre></td></tr></table></div></figure>


<h3>Install setuptools</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>wget http://pypi.python.org/packages/source/s/setuptools/setuptools-0.6c11.tar.gz
</span><span class='line'>tar xzvf setuptools-0.6c11.tar.gz
</span><span class='line'>rm setuptools-0.6c11.tar.gz
</span><span class='line'>cd setuptools-0.6c11
</span><span class='line'>python setup.py install
</span><span class='line'>cd ..
</span><span class='line'>rm -rf setuptools-0.6c11</span></code></pre></td></tr></table></div></figure>


<h3>Install pip</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>wget http://pypi.python.org/packages/source/p/pip/pip-1.2.1.tar.gz
</span><span class='line'>tar xzvf pip-1.2.1.tar.gz
</span><span class='line'>rm pip-1.2.1.tar.gz
</span><span class='line'>cd pip-1.2.1
</span><span class='line'>python setup.py install
</span><span class='line'>cd ..
</span><span class='line'>rm -rf pip-1.2.1</span></code></pre></td></tr></table></div></figure>


<h3>Install Django, flup and MySQL Python Module</h3>

<p>Now that pip is installed this is easy part.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>pip install Django
</span><span class='line'>pip install flup
</span><span class='line'>pip install MySQL-python</span></code></pre></td></tr></table></div></figure>


<h3>Create .htaccess</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd ~/public_html/mysite # where mysite is the root folder of your site
</span><span class='line'>vim .htaccess # Press i then enter the following:
</span><span class='line'>AddHandler fcgid-script .fcgi
</span><span class='line'>RewriteEngine On
</span><span class='line'>RewriteCond %{REQUEST_FILENAME} !-f
</span><span class='line'>RewriteRule ^(.*)$ mysite.fcgi/$1 [QSA,L] # Press wq</span></code></pre></td></tr></table></div></figure>


<h3>Configure Your Website</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mkdir ~/django-projects
</span><span class='line'>cd ~/django-projects
</span><span class='line'>django-admin.py startproject myproject # I use the same name as mysite
</span><span class='line'>                                       # without any periods
</span><span class='line'>cd ~/public_html/mysite
</span><span class='line'>vim mysite.fcgi # Press i then enter the following:
</span><span class='line'>#!/homeX/your_username/python/bin/python
</span><span class='line'>import sys, os
</span><span class='line'>
</span><span class='line'># Where /home/your_username is the path to your home directory
</span><span class='line'>sys.path.insert(0, "/home/your_username/python")
</span><span class='line'>sys.path.insert(13, "/home/your_username/django-projects/myproject")
</span><span class='line'>
</span><span class='line'>os.environ['DJANGO_SETTINGS_MODULE'] = 'myproject.settings'
</span><span class='line'>from django.core.servers.fastcgi import runfastcgi
</span><span class='line'>runfastcgi(method="threaded", daemonize="false") # Press &lt;escape&gt;wq&lt;enter&gt;
</span><span class='line'>chmod 0755 mysite.fcgi</span></code></pre></td></tr></table></div></figure>


<p></p>

<h3>Test your configuration</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>python mysite.fcgi
</span><span class='line'>
</span><span class='line'>
</span><span class='line'># Fix any errors and run the command again. When you have an HTML page
</span><span class='line'># returned your Django install is complete. You should be able to go to your
</span><span class='line'># sites URL and view the Django welcome page.</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>Thats everything</p>

<p>Now you can get to work and create some real Django pages.</p>

<h3>A Few Tips</h3>

<p>Remember to install every python and django package using pip  that way they will be available to your django app.
Keep in mind that every Django command like syncdb, collectstatic  etc. should be run using the correct version of Python. This means using source ~/.bashrc every time you log into your SSH client e.g.
source ~/.bashrc
python manage.py syncdb
python manage.py shell
etc.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2013/01/11/essential-mozilla-command-line/">Essential Mozilla Command Line</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-01-11T00:27:00+08:00" pubdate data-updated="true">Jan 11<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/01/11/essential-mozilla-command-line/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>This is a reference of some of the very important mozilla commands that I use in daily Terminal Life</em></p>

<h3>Requirements</h3>

<p>Set up Hg, Autoconf using Brew. Look up the instructions at the official website.</p>

<h3>Setting up of Source Directory</h3>

<p>Mozilla Code can be checked out from http://hg.mozilla.org. To set up a Thunderbird and Calendar clone on your local machine checkout the source code as</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>bash$ hg clone http://hg.mozilla.org/comm-central</span></code></pre></td></tr></table></div></figure>


<p>This will create a <code>comm-central</code> directory in your local machine
Now <code>comm-central</code> depends on a number of submodules which can be fetched by the following commands</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>bash<span class="nv">$ </span><span class="nb">cd </span>comm-central
</span><span class='line'>bash<span class="nv">$ </span>python client.py checkout
</span></code></pre></td></tr></table></div></figure>


<p>This will fetch the submodules. It will take a while</p>

<h3>Compiling Code</h3>

<p>In order to build the calendar application create a <code>.mozconfig</code> file within <code>comm-central</code> and insert the following code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mk_add_options <span class="nv">MOZ_OBJDIR</span><span class="o">=</span>@TOPSRCDIR@/obj-TB
</span><span class='line'>mk_add_options <span class="nv">AUTOCONF</span><span class="o">=</span>/usr/local/Cellar/autoconf213/2.13/bin/autoconf213
</span><span class='line'>ac_add_options --enable-calendar
</span><span class='line'>
</span><span class='line'><span class="c"># Turn off compiler optimization. This will make applications run slower,</span>
</span><span class='line'><span class="c"># will allow you to debug the applications under a debugger, like GDB.</span>
</span><span class='line'>ac_add_options --disable-optimize
</span><span class='line'>ac_add_options --disable-jemalloc
</span><span class='line'>
</span><span class='line'><span class="c"># -s makes builds quieter by default</span>
</span><span class='line'><span class="c"># -j4 allows 4 tasks to run in parallel. Set the number to be the amount of</span>
</span><span class='line'><span class="c"># cores in your machine. 4 is a good number.</span>
</span><span class='line'>
</span><span class='line'>mk_add_options <span class="nv">MOZ_MAKE_FLAGS</span><span class="o">=</span><span class="s2">&quot;-j4 -s --no-print-directory&quot;</span>
</span><span class='line'>mk_add_options <span class="nv">JS_READLINE</span><span class="o">=</span>1
</span><span class='line'><span class="nb">export </span><span class="nv">JS_READLINE</span><span class="o">=</span>1
</span><span class='line'>ac_add_options --disable-tests
</span><span class='line'>ac_add_options --disable-installer
</span></code></pre></td></tr></table></div></figure>


<p>Now fire away the compiler using the following command:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>bash<span class="nv">$ </span>make -f client.mk
</span></code></pre></td></tr></table></div></figure>


<p>This will take quite a lot of time depending upon your machine&#8217;s strength of course.</p>

<h3>Applying a patch</h3>

<p>From time to time, you might need to apply a patch from someone else, or maybe your own patch. This is quite easy, but note that if you plan on applying the patch, making some changes and then want to create a patch that doesn&#8217;t contain the patch you originally applied, it might be quite a bit harder.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">cd</span> <span class="nv">$MOZILLA</span>/calendar
</span><span class='line'><span class="c"># --dry-run tests the patching process to ensure that the patch will go</span>
</span><span class='line'><span class="c"># ahead cleanly. Be sure to run --dry-run at least once before running</span>
</span><span class='line'><span class="c"># the actual patching process.</span>
</span><span class='line'>patch -p1 -i ~/my_first_bug.diff --dry-run
</span><span class='line'><span class="c"># Now check if the patch applies cleanly, or you are willing to fix the </span>
</span><span class='line'><span class="c"># places it went wrong. When you are confident, you can call:</span>
</span><span class='line'>patch -p0 -i ~/my_first_bug.diff
</span><span class='line'>
</span><span class='line'><span class="c"># If the file to patch was not found, take a look at the patch headers. For</span>
</span><span class='line'><span class="c"># example, if the header contains &quot;+++ themes/winstripe/calendar-views.css&quot;,</span>
</span><span class='line'><span class="c"># then you need to go into the base directory and call again. If the header</span>
</span><span class='line'><span class="c"># contains &quot;+++ mozilla/calendar/base/Makefile.in&quot;, you can use -p2 instead to</span>
</span><span class='line'><span class="c"># strip the &quot;mozilla/calendar&quot; part.</span>
</span><span class='line'>patch -p2 -i ~/my_first_bug.diff
</span></code></pre></td></tr></table></div></figure>


<h3>Creating a patch</h3>

<p>Simply create a diff and store it somewhere</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>bash<span class="nv">$ </span>hg diff &gt; ~/my_first_patch.diff
</span></code></pre></td></tr></table></div></figure>


<h3>Reverting a patch</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>bash<span class="nv">$ </span>hg revert .
</span></code></pre></td></tr></table></div></figure>


<p>For more information refer to <a href="https://developer.mozilla.org/en-US/docs/Developer_Guide/Build_Instructions">Mozilla Documentation on Build</a></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/06/24/android-shortcuts-and-must-have-gists/">Android Shortcuts and Must-have Gists</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/21/my-final-year-project-a-web-app-hosting-for-apps/">My Final Year Project - A web app hosting for apps</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/21/making-sense-of-vacations-geek-style/">Making sense of vacations - Geek Style</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/23/android-development-within-a-virtual-machine/">Android Development within a Virtual Machine</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/10/deploying-rails-on-nginx-and-thin/">Deploying Rails on Nginx and thin</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/creativepsyco">@creativepsyco</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'creativepsyco',
            count: 6,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Mohit Kanwal -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'creativepyscoblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
